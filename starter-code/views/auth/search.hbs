<h2>Map</h2>


<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />

<style>
body { 
  margin:0;
  padding:0; }
#map { 
  position:absolute; 
  top:150px; 
  bottom:0; 
  width:100%; }
</style>

<div id='map'></div>
<script>

  var promise = new Promise(function (resolve, reject) {
    navigator.geolocation.getCurrentPosition(function (position) {
      resolve(pos = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      })
    })
  });

  promise.then(currentCoords => {
mapboxgl.accessToken = 'pk.eyJ1IjoidmljYmFuIiwiYSI6ImNqczFobXl5cTFsbXI0M29jdXp6OXVqcGQifQ.YPIeCxviK0RvnP3aUa3qgg';
var map = new mapboxgl.Map({
container: 'map',
style: 'mapbox://styles/mapbox/streets-v11',
center: [currentCoords.lng, currentCoords.lat],
zoom: 12
  });

var geojson = {
  type: 'FeatureCollection',
  features: [{
    type: 'Feature',
    geometry: {
      type: 'Point',
      coordinates: [currentCoords.lng, currentCoords.lat]
    },
  },
  ]}

  new mapboxgl.Marker()
    .setLngLat(geojson.features[0].geometry.coordinates)
    .addTo(map);
  





})
</script>

